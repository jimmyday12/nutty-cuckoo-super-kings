---
title: "Stats"
listing: stats
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(here)

```

```{r load data, include=FALSE, echo = FALSE}

bowling <- read_csv(here::here("data", "bowling.csv"))
batting <- read_csv(here::here("data", "batting.csv"))
```

```{r batting, include = FALSE, echo = FALSE}
batting_all %>%
  mutate(`50s` = ifelse(Runs >= 50, 1, 0),
         `30s` = ifelse(Runs >= 30 & Runs < 50, 1, 0)) %>%
  group_by(team, Batsmen) %>%
  summarise(innings = n(),
          not_outs = sum(Dismissal == "Not Out"),
          Runs = sum(Runs),
          Balls = sum(Balls),
          SR = Runs/Balls*100,
          Avg = Runs/(innings-not_outs),
          `50s` = sum(`50s`),
          `30s` = sum(`30s`),
          fours = sum(`4s`),
          sixes = sum(`6s`)) %>%
  arrange(desc(Runs)) %>%
  filter(team == "The Nutty Cuckoo Super Kings") %>%
  filter(innings > 3) %>%
  filter(Runs > 99) %>%
  print(n = 25)
```


```{r bowling, include = FALSE, echo = FALSE}
bowling_all %>%
  group_by(team, Bowlers) %>%
  summarise(innings = n(),
            Overs = sum(Overs),
            Runs = sum(Runs),
            SR = (Overs * 6)/sum(Wkts),
            `3fa` = sum(Wkts >= 3),
            `5fa` = sum(Wkts >= 5),
            Wickets = sum(Wkts),
            Maidens = sum(Maidens),
            Econ = Runs/Overs,
            Avg = Runs/Wickets) %>%
  arrange(desc(Wickets), Econ, Avg) %>%
  filter(team == "The Nutty Cuckoo Super Kings") %>%
  filter(innings > 3) %>%
  print(n = 25)

```